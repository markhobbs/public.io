(function(){"use strict";var a=0,b=1,c=!0,d=5000,e=0,f=null,g=!0,h=2,A=300,j=null,k=null,l=!1,m=5,n=0.3,o={},p=[],q=[],r=document.getElementById('bank'),s=document.getElementById('container-app-1'),t=document.getElementById('history'),u=document.getElementById('lanes'),v=document.getElementById('message'),w=document.getElementById('selectors'),x=document.getElementById('btn-reset-history'),y=document.getElementById('btn-reset'),z=document.getElementById('btn-start'),_=(s?s.getElementsByClassName('track'):[]),aA=[{color:'#000000',dark:!0,id:200,name:'black'},{color:'#0200fd',dark:!0,id:100,name:'blue'},{color:'#ff0201',dark:!1,id:50,name:'red'},{color:'#ff02fd',dark:!1,id:20,name:'magenta'},{color:'#00ff1c',dark:!1,id:10,name:'green'},{color:'#02ffff',dark:!1,id:5,name:'cyan'},{color:'#ffff1d',dark:!1,id:2,name:'yellow'},{color:'#cfcfcf',dark:!1,id:1,name:'white'}],aB={getItem:function(B){try{return window.localStorage.getItem(B)}catch(e){return o[B]||null}},removeItem:function(C){try{window.localStorage.removeItem(C)}catch(e){delete o[C]}},setItem:function(_a,_b){try{window.localStorage.setItem(_a,_b)}catch(e){o[_a]=_b}}};if(!s||!u||!v||!r||!w||!t||!y||!x||!z){alert('Some UI elements are missing. Game cannot load.');return}function aC(){var D=[0.01,0.02,0.05,0.10,0.20,0.50,1,2],_B=~~Math.random()*D.length;return D[_B]}function aD(_A){return ~~Math.random()*_A}function aE(E){var aX=aB.getItem('history');aB.setItem('history',(aX?aX+','+E:E));aF()}function aF(){var aY=aB.getItem('history');if(aY){x.removeAttribute('disabled');var aZ=aY.split(','),_c={};for(var i=0;i<aZ.length;i++){var _e=aZ[i];_c[_e]=(_c[_e]||0)+1}t.innerHTML=`<pre>${JSON.stringify(_c,null,2)}</pre>`}else{x.setAttribute('disabled','disabled');t.innerHTML='<p>No Race History As Yet</p>'}}function aG(){z.addEventListener('click',aQ,!1);y.addEventListener('click',aP,!1);x.addEventListener('click',aM,!1)}function aH(){for(var i=0;i<q.length;i++)q[i].addEventListener('click',aO,!1)}function aI(){if(!l)return;var bA=-1;for(var i=0;i<p.length;i++){var _C=p[i],_d=_C.offsetWidth,_E=h,F=~~_d+(_E*aC());if(_d<A)_C.style.width=`${F}px`;else bA===-1&&(bA=i)}_E++;if(bA>-1){if(g){for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}clearTimeout(f)}var G=p[bA],H=G.getElementsByTagName('span')[0].innerHTML,I=G.getAttribute('id');l=!1;aN(I,e,H);aE(I);y.focus()}else window.requestAnimationFrame(aI)}function aJ(){for(var i=0;i<q.length;i++)q[i].disabled=!0;z.removeAttribute('disabled')}function aK(){for(var i=0;i<q.length;i++){q[i].classList.contains('active')&&q[i].classList.remove('active');q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled')}function aL(){a=0;for(var i=0;i<p.length;i++){p[i].style.width=`${h}px`;p[i].classList.contains('active')&&p[i].classList.remove('active')}}function aM(){confirm('Are You Sure? This Action Will Delete All Race History.')&&(aB.removeItem('history'),aF())}function aN(bB,bC,bD){var _D=`<em>Resetting in ${m} seconds.</em>`;bB===bC?(v.innerHTML='Hooray! <strong class=\'upper\'>'+bD+'</strong> Won. <br>You Won <strong>'+bC+'</strong>'+' Credit(s).<br>'+_D,aW(bC)):(v.innerHTML='You lose <strong>'+'1'+'</strong> credit.<br>'+'<strong class=\'upper\'>'+bD+'</strong> won the race.<br>'+_D,aW(-1));aU(bB);y.removeAttribute('disabled');j&&clearTimeout(j);j=setTimeout(aP,m*1000)}function aO(e){if(l){alert('No Bets Please! Race in Progress.');return}y.removeAttribute('disabled');if(a<b){var bE=document.getElementById(this.name);bE.classList.add('active');e=bE.getAttribute('id');aJ();this.classList.add('active');a++}else alert(`Change Bet!  ${b} Bet Max.`)}function aP(){l=!1;u.classList.remove('race-progress');j&&clearTimeout(j);f&&clearTimeout(f);k&&clearTimeout(k);v.innerHTML='';var bF=parseInt(r.value,10);bF>0?(aK(),aL()):(alert('Funds Required to Race! Refresh Page to Start Again.'))}function aQ(){l=!0;A=_[0].clientWidth;p=s.querySelectorAll('.lane');window.requestAnimationFrame(aI);u.classList.add('race-progress');v.innerHTML='<em>No Bets! Race in Progress.</em>';z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled');k=setInterval(aR,300);g&&(f=setInterval(aS,parseInt(n*1000)))}function aR(){c===!0?(c=!1,u.classList.add('race-sprite-alt')):(c=!0,u.classList.remove('race-sprite-alt'))}function aS(){if(q.length<2)return;var bG=aD(q.length),bH;dobH=aD(q.length);while (bH===bG)for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner')}(q[bG]&&q[bH])&&(q[bG].classList.add('loser'),q[bH].classList.add('winner'))}function aT(){var bI='',bJ='';for(let bM=aA.length-1;bM>=0;bM--){var bK=aA[bM],bL=bK.dark?'dark':'';bI+='<div style=\'background-color: '+bK.color+'\' id=\''+bK.id+'\' class=\'lane '+bL+'\'><span>'+bK.name+':'+bK.id+'</span>'+'</div>';bJ+='<button style=\'background-color: '+bK.color+'\' name=\''+bK.id+'\' class=\'selector '+bL+'\'>'+bK.id+'<sup>*</sup></button>'}u.innerHTML=bI;w.innerHTML=bJ;p=s.querySelectorAll('.lane');q=s.querySelectorAll('.selector');aH()}function aU(bN){for(var i=0;i<q.length;i++)q[i].name===bN?q[i].classList.add('winner'):q[i].classList.add('loser')}function aV(){r.value=d;aT();aF();aG()}function aW(bO){var bP=parseInt(r.value,10);bP+=parseInt(bO,10);r.value=bP}window.onload=()=>{aV();aK()}})();
