(function(){var a=0,b=1,c=5000,d=0,e=null,f=!0,g=2,h=300,A=null,j=!1,k=5,l=0.3,m={},n=[],o=[],p=document.getElementById('container-app-1'),q=document.getElementById('history'),r=document.getElementById('lanes'),s=document.getElementById('message'),t=document.getElementById('selectors'),u=document.getElementById('wallet'),v=document.getElementById('btn-reset-history'),w=document.getElementById('btn-reset'),x=document.getElementById('btn-start'),y=p?p.getElementsByClassName('track'):[],z=[{color:'#000000',dark:!0,id:200,name:'black'},{color:'#0200fd',dark:!0,id:100,name:'blue'},{color:'#ff0201',dark:!1,id:50,name:'red'},{color:'#ff02fd',dark:!1,id:20,name:'magenta'},{color:'#00ff1c',dark:!1,id:10,name:'green'},{color:'#02ffff',dark:!1,id:5,name:'cyan'},{color:'#ffff1d',dark:!1,id:2,name:'yellow'},{color:'#cfcfcf',dark:!1,id:1,name:'white'}],_={getItem:function(B){try{return window.localStorage.getItem(B)}catch(e){return m[B]||null}},removeItem:function(C){try{window.localStorage.removeItem(C)}catch(e){delete m[C]}},setItem:function(_a,_b){try{window.localStorage.setItem(_a,_b)}catch(e){m[_a]=_b}}};if(!p||!r||!s||!u||!t||!q||!w||!v||!x){alert('Some UI elements are missing. Game cannot load.');return}function aA(){var D=[0.01,0.02,0.05,0.10,0.20,0.50,1,2],_B=~~Math.random()*D.length;return D[_B]}function aB(_A){return ~~Math.random()*_A}function aC(E){var aV=_.getItem('history');_.setItem('history',aV?aV+','+E:E);aD()}function aD(){var aW=_.getItem('history');if(aW){v.removeAttribute('disabled');var aX=aW.split(','),_c={};for(var i=0;i<aX.length;i++){var _e=aX[i];_c[_e]=(_c[_e]||0)+1}q.innerHTML=`<pre>${JSON.stringify(_c,null,2)}</pre>`}else{v.setAttribute('disabled','disabled');q.innerHTML='<p>No Race History As Yet</p>'}}function aE(){x.addEventListener('click',aO,!1);w.addEventListener('click',aN,!1);v.addEventListener('click',aK,!1)}function aF(){for(var i=0;i<o.length;i++)o[i].addEventListener('click',aM,!1)}function aG(){if(!j)return;var aY=-1;for(var i=0;i<n.length;i++){var _C=n[i],_d=_C.offsetWidth,_E=g,F=~~_d+(_E*aA());if(_d<h)_C.style.width=`${F}px`;else aY===-1&&(aY=i)}_E++;if(aY>-1){if(f){for(var i=0;i<o.length;i++){o[i].classList.contains('loser')&&o[i].classList.remove('loser');o[i].classList.contains('winner')&&o[i].classList.remove('winner');o[i].disabled=!1}clearTimeout(e)}var G=n[aY],H=G.getElementsByTagName('span')[0].innerHTML,I=G.getAttribute('id');j=!1;aL(I,d,H);aC(I);w.focus()}else window.requestAnimationFrame(aG)}function aH(){for(var i=0;i<o.length;i++)o[i].disabled=!0;x.removeAttribute('disabled')}function aI(){for(var i=0;i<o.length;i++){o[i].classList.contains('active')&&o[i].classList.remove('active');o[i].classList.contains('loser')&&o[i].classList.remove('loser');o[i].classList.contains('winner')&&o[i].classList.remove('winner');o[i].disabled=!1}x.setAttribute('disabled','disabled');w.setAttribute('disabled','disabled')}function aJ(){a=0;for(var i=0;i<n.length;i++){n[i].style.width=`${g}px`;n[i].classList.contains('active')&&n[i].classList.remove('active')}}function aK(){confirm('Are You Sure? This Action Will Delete All Race History.')&&(_.removeItem('history'),aD())}function aL(aZ,bA,bB){var _D=`<p>Resetting Race in ${k} seconds.</p>`;aZ===bA?(s.innerHTML='Hooray <strong class=\'upper\'>'+bB+'</strong> is the Winner! You Won <strong>'+bA+'</strong> Credits.</p>'+_D,aU(bA)):(s.innerHTML='<strong class=\'upper\'>'+bB+'</strong> is the Winner! You Lose <strong>'+bA+'</strong> Credits.</p>'+_D,aU(-bA));aS(aZ);w.removeAttribute('disabled');A&&clearTimeout(A);A=setTimeout(aN,k*1000)}function aM(e){if(j){alert('No Bets Please! Race in Progress.');return}w.removeAttribute('disabled');if(a<b){var bC=document.getElementById(this.name);bC.classList.add('active');d=bC.getAttribute('id');aH();this.classList.add('active');a++}else alert(`Change Bet!  ${b} Bet Max.`)}function aN(){j=!1;r.classList.remove('race-progress');A&&clearTimeout(A);e&&clearTimeout(e);s.innerHTML='';var bD=parseInt(u.value,10);bD>0?(aI(),aJ()):(alert('Funds Required to Reset Race! Refresh Page to Start Again.'))}function aO(){j=!0;h=y[0].clientWidth;n=p.querySelectorAll('.lane');window.requestAnimationFrame(aG);r.classList.add('race-progress');s.innerHTML='No Bets Please! Race in Progress.';x.setAttribute('disabled','disabled');w.setAttribute('disabled','disabled');f&&(e=setInterval(aP,parseInt(l*1000)))}function aP(){if(o.length<2)return;var bE=aB(o.length),bF;dobF=aB(o.length);while (bF===bE)for(var i=0;i<o.length;i++){o[i].classList.contains('loser')&&o[i].classList.remove('loser');o[i].classList.contains('winner')&&o[i].classList.remove('winner')}(o[bE]&&o[bF])&&(o[bE].classList.add('loser'),o[bF].classList.add('winner'))}function aQ(){for(var i=0;i<o.length;i++){o[i].classList.contains('loser')&&o[i].classList.remove('loser');o[i].classList.contains('winner')&&o[i].classList.remove('winner');Math.random()<0.5?o[i].classList.add('winner'):o[i].classList.add('loser')}}function aR(){var bG='',bH='';for(var i=0;i<z.length;i++){var bI=z[i],bJ=bI.dark?'dark':'';bG+='<div style=\'background-color: '+bI.color+'\' id=\''+bI.id+'\' class=\'lane '+bJ+'\'><span>'+bI.name+'</span></div>';bH+='<button style=\'background-color: '+bI.color+'\' name=\''+bI.id+'\' class=\'btn-selector '+bJ+'\'>'+bI.id+'<sup>c</sup></button>'}r.innerHTML=bG;t.innerHTML=bH;n=p.querySelectorAll('.lane');o=p.querySelectorAll('.btn-selector');aF()}function aS(bK){for(var i=0;i<o.length;i++)o[i].name===bK?o[i].classList.add('winner'):o[i].classList.add('loser')}function aT(){u.value=c;aR();aD();aE()}function aU(bL){var bM=parseInt(u.value,10);bM+=parseInt(bL,10);u.value=bM}window.onload=()=>{aT();aI()}})();
