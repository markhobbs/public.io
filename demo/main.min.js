(function(){var a=0,b=1,c=!0,d=5000,e=0,f=null,g=!0,h=2,A=300,j=null,k=null,l=!1,m=5,n=0.3,o={},p=[],q=[],r=document.getElementById('container-app-1'),s=document.getElementById('history'),t=document.getElementById('lanes'),u=document.getElementById('message'),v=document.getElementById('selectors'),w=document.getElementById('wallet'),x=document.getElementById('btn-reset-history'),y=document.getElementById('btn-reset'),z=document.getElementById('btn-start'),_=r?r.getElementsByClassName('track'):[],aA=[{color:'#000000',dark:!0,id:200,name:'black'},{color:'#0200fd',dark:!0,id:100,name:'blue'},{color:'#ff0201',dark:!1,id:50,name:'red'},{color:'#ff02fd',dark:!1,id:20,name:'magenta'},{color:'#00ff1c',dark:!1,id:10,name:'green'},{color:'#02ffff',dark:!1,id:5,name:'cyan'},{color:'#ffff1d',dark:!1,id:2,name:'yellow'},{color:'#cfcfcf',dark:!1,id:1,name:'white'}],aB={getItem:function(B){try{return window.localStorage.getItem(B)}catch(e){return o[B]||null}},removeItem:function(C){try{window.localStorage.removeItem(C)}catch(e){delete o[C]}},setItem:function(_a,_b){try{window.localStorage.setItem(_a,_b)}catch(e){o[_a]=_b}}};if(!r||!t||!u||!w||!v||!s||!y||!x||!z){alert('Some UI elements are missing. Game cannot load.');return}function aC(){var D=[0.01,0.02,0.05,0.10,0.20,0.50,1,2],_B=~~Math.random()*D.length;return D[_B]}function aD(_A){return ~~Math.random()*_A}function aE(E){var aX=aB.getItem('history');aB.setItem('history',aX?aX+','+E:E);aF()}function aF(){var aY=aB.getItem('history');if(aY){x.removeAttribute('disabled');var aZ=aY.split(','),_c={};for(var i=0;i<aZ.length;i++){var _e=aZ[i];_c[_e]=(_c[_e]||0)+1}s.innerHTML=`<pre>${JSON.stringify(_c,null,2)}</pre>`}else{x.setAttribute('disabled','disabled');s.innerHTML='<p>No Race History As Yet</p>'}}function aG(){z.addEventListener('click',aQ,!1);y.addEventListener('click',aP,!1);x.addEventListener('click',aM,!1)}function aH(){for(var i=0;i<q.length;i++)q[i].addEventListener('click',aO,!1)}function aI(){if(!l)return;var bA=-1;for(var i=0;i<p.length;i++){var _C=p[i],_d=_C.offsetWidth,_E=h,F=~~_d+(_E*aC());if(_d<A)_C.style.width=`${F}px`;else bA===-1&&(bA=i)}_E++;if(bA>-1){if(g){for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}clearTimeout(f)}var G=p[bA],H=G.getElementsByTagName('span')[0].innerHTML,I=G.getAttribute('id');l=!1;aN(I,e,H);aE(I);y.focus()}else window.requestAnimationFrame(aI)}function aJ(){for(var i=0;i<q.length;i++)q[i].disabled=!0;z.removeAttribute('disabled')}function aK(){for(var i=0;i<q.length;i++){q[i].classList.contains('active')&&q[i].classList.remove('active');q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled')}function aL(){a=0;for(var i=0;i<p.length;i++){p[i].style.width=`${h}px`;p[i].classList.contains('active')&&p[i].classList.remove('active')}}function aM(){confirm('Are You Sure? This Action Will Delete All Race History.')&&(aB.removeItem('history'),aF())}function aN(bB,bC,bD){var _D=`<p>Resetting Race in ${m} seconds.</p>`;bB===bC?(u.innerHTML='Hooray <strong class=\'upper\'>'+bD+'</strong> is the Winner! You Won <strong>'+bC+'</strong> Credits.</p>'+_D,aW(bC)):(u.innerHTML='<strong class=\'upper\'>'+bD+'</strong> is the Winner! You Lose <strong>'+bC+'</strong> Credits.</p>'+_D,aW(-bC));aU(bB);y.removeAttribute('disabled');j&&clearTimeout(j);j=setTimeout(aP,m*1000)}function aO(e){if(l){alert('No Bets Please! Race in Progress.');return}y.removeAttribute('disabled');if(a<b){var bE=document.getElementById(this.name);bE.classList.add('active');e=bE.getAttribute('id');aJ();this.classList.add('active');a++}else alert(`Change Bet!  ${b} Bet Max.`)}function aP(){l=!1;t.classList.remove('race-progress');j&&clearTimeout(j);f&&clearTimeout(f);k&&clearTimeout(k);u.innerHTML='';var bF=parseInt(w.value,10);bF>0?(aK(),aL()):(alert('Funds Required to Reset Race! Refresh Page to Start Again.'))}function aQ(){l=!0;A=_[0].clientWidth;p=r.querySelectorAll('.lane');window.requestAnimationFrame(aI);t.classList.add('race-progress');u.innerHTML='No Bets Please! Race in Progress.';z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled');k=setInterval(aR,300);g&&(f=setInterval(aS,parseInt(n*1000)))}function aR(){c===!0?(c=!1,t.classList.add('race-sprite-alt')):(c=!0,t.classList.remove('race-sprite-alt'))}function aS(){if(q.length<2)return;var bG=aD(q.length),bH;dobH=aD(q.length);while (bH===bG)for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner')}(q[bG]&&q[bH])&&(q[bG].classList.add('loser'),q[bH].classList.add('winner'))}function aT(){var bI='',bJ='';for(var i=0;i<aA.length;i++){var bK=aA[i],bL=bK.dark?'dark':'';bI+='<div style=\'background-color: '+bK.color+'\' id=\''+bK.id+'\' class=\'lane '+bL+'\'><span>'+bK.name+'</span></div>';bJ+='<button style=\'background-color: '+bK.color+'\' name=\''+bK.id+'\' class=\'btn-selector '+bL+'\'>'+bK.id+'<sup>c</sup></button>'}t.innerHTML=bI;v.innerHTML=bJ;p=r.querySelectorAll('.lane');q=r.querySelectorAll('.btn-selector');aH()}function aU(bM){for(var i=0;i<q.length;i++)q[i].name===bM?q[i].classList.add('winner'):q[i].classList.add('loser')}function aV(){w.value=d;aT();aF();aG()}function aW(bN){var bO=parseInt(w.value,10);bO+=parseInt(bN,10);w.value=bO}window.onload=()=>{aV();aK()}})();
