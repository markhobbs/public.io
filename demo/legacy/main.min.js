(function(){"use strict";var a=0,b=1,c=!0,d=5000,e=0,f=null,g=!0,h=2,A=300,j=null,k=null,l=!1,m=5,n=0.3,o={},p=[],q=[],r=document.getElementById('bank'),s=document.getElementById('container-app-1'),t=document.getElementById('history'),u=document.getElementById('lanes'),v=document.getElementById('message'),w=document.getElementById('selectors'),x=document.getElementById('btn-reset-history'),y=document.getElementById('btn-reset'),z=document.getElementById('btn-start'),_=(s?s.getElementsByClassName('track'):[]),aA=[{color:'#000000',dark:!0,id:200,name:'black'},{color:'#0200fd',dark:!0,id:100,name:'blue'},{color:'#ff0201',dark:!1,id:50,name:'red'},{color:'#ff02fd',dark:!1,id:20,name:'magenta'},{color:'#00ff1c',dark:!1,id:10,name:'green'},{color:'#02ffff',dark:!1,id:5,name:'cyan'},{color:'#ffff1d',dark:!1,id:2,name:'yellow'},{color:'#cfcfcf',dark:!1,id:1,name:'white'}],aB={getItem:function(B){try{return window.localStorage.getItem(B)}catch(e){return o[B]||null}},removeItem:function(C){try{window.localStorage.removeItem(C)}catch(e){delete o[C]}},setItem:function(_a,_b){try{window.localStorage.setItem(_a,_b)}catch(e){o[_a]=_b}}};if(!s||!u||!v||!r||!w||!t||!y||!x||!z){alert('Some UI elements are missing. Game cannot load.');return}function aC(D,_B){aD();j=setTimeout(D,_B)}function aD(){j&&(clearTimeout(j),j=null)}function aE(_A,E){aF();k=setInterval(_A,E)}function aF(){k&&(clearInterval(k),k=null)}function aG(bE,bF){aH();f=setInterval(bE,bF)}function aH(){f&&(clearInterval(f),f=null)}function aI(){aD();aH();aF()}function aJ(){var bG=[0.01,0.02,0.05,0.10,0.20,0.50,1,2],bH=~~Math.random()*bG.length;return bG[bH]}function aK(bI){return ~~Math.random()*bI}function aL(bJ){var bK=aB.getItem('history');aB.setItem('history',(bK?bK+','+bJ:bJ));aM()}function aM(){var bL=aB.getItem('history');if(bL){x.removeAttribute('disabled');var bM=bL.split(','),_c={};for(var i=0;i<bM.length;i++){var _e=bM[i];_c[_e]=(_c[_e]||0)+1}t.innerHTML=`<pre>${JSON.stringify(_c,null,2)}</pre>`}else{x.setAttribute('disabled','disabled');t.innerHTML='<p>No Race History As Yet</p>'}}function aN(){z.addEventListener('click',aX,!1);y.addEventListener('click',aW,!1);x.addEventListener('click',aT,!1)}function aO(){for(var i=0;i<q.length;i++)q[i].addEventListener('click',aV,!1)}function aP(){if(!l)return;var bN=-1;for(var i=0;i<p.length;i++){var _C=p[i],_d=_C.offsetWidth,_E=h,F=~~_d+(_E*aJ());if(_d<A)_C.style.width=`${F}px`;else bN===-1&&(bN=i)}_E++;if(bN>-1){if(g){for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}clearTimeout(f)}var G=p[bN],H=G.getElementsByTagName('span')[0].innerHTML,I=G.getAttribute('id');l=!1;aU(I,e,H);aL(I);y.focus()}else window.requestAnimationFrame(aP)}function aQ(){for(var i=0;i<q.length;i++)q[i].disabled=!0;z.removeAttribute('disabled')}function aR(){for(var i=0;i<q.length;i++){q[i].classList.contains('active')&&q[i].classList.remove('active');q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner');q[i].disabled=!1}z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled')}function aS(){a=0;for(var i=0;i<p.length;i++){p[i].style.width=`${h}px`;p[i].classList.contains('active')&&p[i].classList.remove('active')}}function aT(){confirm('Are You Sure? This Action Will Delete All Race History.')&&(aB.removeItem('history'),aM())}function aU(bO,bP,bQ){var _D=`<em>Resetting in ${m} seconds.</em>`;bO===bP?(v.innerHTML='Hooray! <strong class=\'upper\'>'+bQ+'</strong> Won. <br>You Won <strong>'+bP+'</strong> Credit(s).<br>'+_D,bD(bP)):(v.innerHTML='You lose <strong>1</strong> credit.<br><strong class=\'upper\'>'+bQ+'</strong> won the race.<br>'+_D,bD(-1));bB(bO);y.removeAttribute('disabled');aC(aW,m*1000)}function aV(e){if(l){alert('No Bets Please! Race in Progress.');return}y.removeAttribute('disabled');if(a<b){var bR=document.getElementById(this.name);bR.classList.add('active');e=bR.getAttribute('id');aQ();this.classList.add('active');a++}else alert(`Change Bet!  ${b} Bet Max.`)}function aW(){l=!1;u.classList.remove('race-progress');aI();v.innerHTML='';var bS=parseInt(r.value,10);bS>0?(aR(),aS()):(alert('Funds Required to Race! Refresh Page to Start Again.'))}function aX(){l=!0;A=_[0].clientWidth;p=s.querySelectorAll('.lane');window.requestAnimationFrame(aP);u.classList.add('race-progress');v.innerHTML='<em>No Bets! Race in Progress.</em>';z.setAttribute('disabled','disabled');y.setAttribute('disabled','disabled');aE(aY,300);g&&aG(aZ,parseInt(n*1000))}function aY(){c===!0?(c=!1,u.classList.add('race-sprite-alt')):(c=!0,u.classList.remove('race-sprite-alt'))}function aZ(){if(q.length<2)return;var bT=aK(q.length),bU;dobU=aK(q.length);while (bU===bT)for(var i=0;i<q.length;i++){q[i].classList.contains('loser')&&q[i].classList.remove('loser');q[i].classList.contains('winner')&&q[i].classList.remove('winner')}(q[bT]&&q[bU])&&(q[bT].classList.add('loser'),q[bU].classList.add('winner'))}function bA(){var bV='',bW='';for(let bZ=aA.length-1;bZ>=0;bZ--){var bX=aA[bZ],bY=bX.dark?'dark':'';bV+='<div style=\'background-color: '+bX.color+'\' id=\''+bX.id+'\' class=\'lane '+bY+'\'><span>'+bX.name+':'+bX.id+'</span>'+'</div>';bW+='<button style=\'background-color: '+bX.color+'\' name=\''+bX.id+'\' class=\'selector '+bY+'\'>'+bX.id+'<sup>*</sup></button>'}u.innerHTML=bV;w.innerHTML=bW;p=s.querySelectorAll('.lane');q=s.querySelectorAll('.selector');aO()}function bB(cA){for(var i=0;i<q.length;i++)q[i].name===cA?q[i].classList.add('winner'):q[i].classList.add('loser')}function bC(){r.value=d;bA();aM();aN()}function bD(cB){var cC=parseInt(r.value,10);cC+=parseInt(cB,10);r.value=cC}window.onload=()=>{bC();aR()}})();
